ch05.Elixirビルド時に何が起こっているか
=======================================

makeコマンドでElixirをビルドする事はch00で述べました。 この時何が起こっているかをいくつかのフェーズに分けて説明していきます。

### 全体の流れ

makeを行うとMakefileの内容でElixirがビルドされます。 ビルドは大きく以下のフェーズに分けられます。

1. rebarを使ってErlangで記述されたElixirコンパイラをコンパイル
2. Elixirコンパイラを使ってElixirで記述されたカーネルをコンパイル
3. Elixirコンパイラを使ってElixirで記述された標準ライブラリをコンパイル
4. Elixirコンパイラを使ってElixirで記述されたUnicodeモジュールをコンパイル
5. Elixirコンパイラを使ってElixirで記述された関連ツール(eex,mix,ex_unit,logger,iex)をコンパイル

### Elixirコンパイラ

makeコマンドを実行すると以下の順でElixirコンパイラがコンパイルされます。

1. elixir/src/elixir.app.src を elixir/lib/elixir/src にコピーする
2. rebarで、elixir/lib/elixir/src 以下のErlangのコードをコンパイルして elixir/lib/elixir/ebin 以下に実行ファイル(.beam,.app)を配置する

src以下のErlangソースコードは4種類あります。

- elixir.app.src

elixir.app.src は elixir.app のテンプレートファイルです。 これを元にelixir.appとしてebin以下に配置されます。

- elixir.hrl

elixir.hrl はErlangのヘッダファイルです。 Elixirコンパイラに関する定義等が記述されています。

- elixir_xxx.erl

elixir_xxx.erl はErlangのソースコードです。 問題無いですね。

- elixir_parser.yrl

elixir_parser.yrl はYeccパーサージェネレーターファイルです。 YeccはErlangのLALR(1)パーサージェネレータです。

TODO: Yeccについての説明

コンパイルが走ると、elixir_parser.yrl から elixir_parser.erl が生成され、 さらに elixir_parser.beam ができます。

TODO: 詳細については別チャプタで後述する旨記載

### Elixirカーネル

### 標準ライブラリ

### Unicodeモジュール

### 関連ツール(eex,mix,ex_unit,logger,iex)
